# 🚀 本地智能投资工作台 - 快速启动指南

## 📋 系统概述

本地智能投资工作台是一个面向A股个人投资者的本地一体化工具，支持选股、研究、组合管理、模拟交易等完整功能。

**当前版本**: P0 + P1 完成版
**状态**: ✅ 所有核心功能已完成

---

## ⚡ 快速启动

### 方法一：一键启动（推荐）

```powershell
.\start_p0_demo.ps1
```

### 方法二：手动启动

#### 1. 启动 API 服务
```powershell
cd D:\Work\Git\DataAnalysis
export PYTHONPATH=$(pwd)
export WORKBENCH_HOST=127.0.0.1
export WORKBENCH_PORT=8003
export WORKBENCH_DATA_DIR=$(pwd)/data
python -m workbench
```

#### 2. 启动 UI 服务（新窗口）
```powershell
cd StockAnal_Sys
export PORT=8888
python run.py
```

---

## 🌐 访问地址

| 服务 | 地址 | 说明 |
|------|------|------|
| **选股工作台** | http://127.0.0.1:8888/workbench | 选股、查看K线、技术指标 |
| **组合管理** | http://127.0.0.1:8888/portfolio | 投资组合管理 |
| **API 文档** | http://127.0.0.1:8003/docs | Swagger API 文档 |
| **API 健康检查** | http://127.0.0.1:8003/api/v1/health | API 状态监控 |

---

## 🎯 核心功能

### 1. 选股工作台
**地址**: http://127.0.0.1:8888/workbench

**功能**:
- ✅ 雷达扫描候选股票
- ✅ K线图实时展示
- ✅ 技术指标图表
- ✅ 新闻与公告
- ✅ 资金流数据
- ✅ 一键生成研究报告

**操作步骤**:
1. 点击"扫描"按钮生成候选
2. 选择股票进入研究
3. 切换标签页查看数据
4. 点击"生成报告"下载

### 2. 组合管理
**地址**: http://127.0.0.1:8888/portfolio

**功能**:
- ✅ 创建投资组合
- ✅ 添加持仓
- ✅ 组合分析与预警
- ✅ 生成调仓建议
- ✅ 创建订单草稿

### 3. 历史回测
**API 调用示例**:

```bash
# 运行回测
curl -X POST http://127.0.0.1:8003/api/v1/backtest/run \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "600519",
    "exchange": "SSE",
    "start_date": "2024-01-01",
    "end_date": "2024-12-31",
    "initial_cash": 1000000,
    "signal_type": "score_threshold",
    "signal_params": {
      "threshold": 70,
      "position_size": 0.5
    }
  }'
```

---

## 📊 功能特性

### P0 核心功能（完整闭环）
- ✅ 选股雷达
- ✅ 个股工作台
- ✅ 评分引擎
- ✅ 操作计划
- ✅ 研究纪要
- ✅ 组合管理
- ✅ 模拟交易
- ✅ 风控校验
- ✅ 交易台账

### P1 增强功能
1. ✅ **新闻与资金流**
   - 新闻收藏、刷新
   - 资金流数据展示

2. ✅ **风控规则库**
   - 16+ 可配置规则
   - 订单频率限制
   - 价格偏离检查

3. ✅ **盘中监控**
   - 5种监控类型
   - 智能防抖
   - 预警分级

4. ✅ **报告导出**
   - 个股研究报告
   - 组合月报
   - 交易复盘

5. ✅ **历史回测**
   - 策略回测
   - 性能指标
   - 策略对比

---

## 🛠️ 常用操作

### 查看系统状态
```bash
# 检查 API
curl http://127.0.0.1:8003/api/v1/health

# 查看风控规则
curl http://127.0.0.1:8003/api/v1/risk/rules

# 查看监控规则
curl http://127.0.0.1:8003/api/v1/monitor/rules
```

### 刷新新闻数据
1. 进入选股工作台
2. 选择任意股票
3. 切换到"新闻"标签
4. 点击"刷新"按钮

### 生成研究报告
1. 进入选股工作台
2. 选择股票
3. 点击"生成报告"
4. 自动下载 Markdown 文件

---

## 📁 重要文件

| 文件 | 说明 |
|------|------|
| `workbench/api/app.py` | API 服务主文件 |
| `workbench/services/` | 业务服务层 |
| `tests/quick_test.py` | 快速测试脚本 |
| `docs/` | 项目文档 |
| `P1_全部完成报告.md` | P1 功能报告 |

---

## 🔧 常见问题

### Q: 端口被占用？
A: 修改端口
```powershell
export WORKBENCH_PORT=8004
python -m workbench
```

### Q: 模块未找到？
A: 设置 Python 路径
```powershell
export PYTHONPATH=$(pwd)
```

### Q: API 连接失败？
A: 检查服务状态
```bash
curl http://127.0.0.1:8003/api/v1/health
```

### Q: 如何停止服务？
A: Ctrl+C 或
```bash
netstat -ano | findstr :8003
taskkill /PID [PID] /F
```

---

## 📚 更多资源

- [P1 全部完成报告](P1_全部完成报告.md)
- [API 规范](docs/spec/API_SPEC.md)
- [领域模型](docs/spec/DOMAIN_SPEC.md)
- [TODO 清单](docs/TODO.md)

---

## 🎊 总结

**系统现状**:
- ✅ P0 (27/27) 完成 - 完整业务闭环
- ✅ P1 (7/7) 完成 - 所有增强功能

**核心能力**:
- 选股 → 研究 → 组合 → 模拟交易 → 复盘
- 新闻、资金流、风控、监控、报告、回测

**下一步**: P2 智能量化深化（FinRL、因子工程、组合优化）

---

**祝您使用愉快！** 🚀
